import asyncio

from telethon import events
from telethon.errors import UserNotParticipantError
from telethon.tl.functions.channels import GetParticipantRequest
from telethon.tl.types import ChannelParticipantAdmin, ChannelParticipantCreator
import random
from ArankBabess import telethn as client

spam_chats = []

EMOJI = [ "??????????",
          "???å∏???ç¨??",
          "???å∑?åπ?å∫??",
          "?å∏?åø?íÆ?å±?åµ",
          "?§Ô????????ñ§",
          "??????????",
          "?å∏???å∫?åπ??",
          "???¶™???ç≤??",
          "?????????å∂Ô∏?,
          "???•§?????ç∑",
          "?ç¨?ç≠?????ç°",
          "?ç®???ç∫?ï??,
          "?•™?•ß?ç¶?ç•??",
          "???ï?π?∑ü•?,
          "?ïüßÉ?©?¶??,
          "???åæ?íÆ???åø",
          "?å®Ô∏è?•Ô??àÔ??å©Ô∏è?ßÔ?",
          "?å∑?èµÔ∏è?∏?∫??,
          "?íÆ?åº?åª????",
          "???¶∏?¶π???ë∏",
          "???????åΩ?•¶",
          "?ê∑?êπ?ê≠?ê®?êª?ç‚?Ô∏?,
          "???????????ç‚?",
          "?åº?å≥?å≤?å¥?åµ",
          "?•©????????",
          "?ç¥?çΩÔ∏è?™?∂ü•?,
          "???è∞?è©?©Ô??è©",
          "??????????",
          "?™¥?åµ?å¥?å≥?å≤",
          "??????????",
          "??????Ô∏èü¶§ü¶?,
          "?¶§?¶©??????",
          "?ê¨?¶≠?????ê≥",
          "???????ê°??",
          "?¶©???????¶™",
          "?ê¶???ï∑Ô∏è?∏Ô???",
          "?•™?ç∞?•ß?ç®?ç®",
          " ?•¨??????",
        ]
          
TAGMES = [ " **?????ê≤ ???????ê≤ ?????ê°?? ???ê®?•±** ",
           " **???ê≤?? ???ê® ???ê≤?? ???ê≤?? ???êß?ê•?ê¢?êß?? ?????ê®??** ",
           " **???? ???ê°???ê•?ê® ?????ê≠???êß ?????ê´?ê≠?? ?????ê¢?êß ???êÆ???ê° ???êÆ???ê°??** ",
           " **???ê°???êß?? ???ê°?? ???ê¢?ê≤?? ???ê¢..???•≤** ",
           " **???ê°???ê´ ???? ?????? ?????ê¢?ê¨?? ?????ê¢?êß ???ê¢?•∫** ",
           " **???ê≠?? ?????ê¢ ???ê®?ê°?ê®?ê≠ ???ê¢?ê¨?ê¨ ?????ê´ ???ê°?ê¢ ???ê°?ê¢ ?????ê©?ê§?ê®?§≠** ",
           " **???ê≤?? ?????ê• ???ê°???ê• ?????ê¨?? ?????ê¢..???§®** ",
           " **?????ê´?ê¢ ???ê°?ê¢ ?????ê≠?ê≠?ê¢?êß?? ?????ê´???? ???ê®????..????** ",
           " **?????ê©?ê§?? ?????ê¶?? ???ê≤?? ?ê°???ê¢..???•≤** ",
           " **?????ê¨?ê≠?? ???êÆ?? ?????ê©?ê§??..????** ",
           " **?????ê´?? ???ê® ???ê©?êß?? ???ê´?ê®?êÆ?ê© ???? ???ê¢???êß???ê© ???ê´ ???ê®??** ",
           " **?????ê©?ê§?ê¢ ?????ê´?ê≠?êß???ê´ ?????ê©?ê§?ê® ???ê°?êÆ?êß?? ???ê°?? ?????ê¢?êß ???ê•???ê¢ ???êß?ê•?ê¢?êß?? ???ê≤?ê¢????????** ",
           " **?????ê´?? ???? ???ê®?ê¨?ê≠?ê¢ ???ê´?ê®????..????** ",
           " **???ê®?êß?? ???ê°???ê• ???ê≤?? ???ê≤??????** ",
           " **???ê§ ???ê®?êß?? ???ê•???ê≤ ???ê´?ê® ???? ???ê•?ê¨?ê¨??** ",
           " **?????ê© ?????ê°?? ???? ???ê®..????** ",
           " **?????ê•?ê•?ê® ???ê¢ ?????ê¶???ê¨?ê≠????** ",
           " **?????ê•?ê•?ê® ???????ê≤ ???ê§?ê´?ê°..???** ",
           " **???ê® ???ê®?êÆ ???êß?ê®?ê∞ ???ê°?ê® ???ê¨ ???ê≤ ???ê∞?êß???ê´.?** ",
           " **???ê°?ê•?ê® ???êÆ???ê° ?????ê¶?? ???ê°???ê•?ê≠?? ?????ê¢?êß.??** ",
           " **???êÆ?ê´ ?????ê≠???ê® ?????ê¢?ê¨?? ???ê® ???????ê≤??** ",
           " **???êÆ?ê¶?ê°???ê´?ê¢ ???êÆ?ê¶?ê¶?ê≤ ???ê≤?? ?????ê´ ?????ê°?ê¢ ?????ê¢?§≠** ",
           " **?????ê´?? ???? ?????ê≠ ???ê®?ê¢ ???ê´?ê®?????•∫?•∫** ",
           " **???ê≤?? ?????????ê• ???êß?ê•?ê¢?êß?? ???? ?????ò∂** ",
           " **?????ê£ ???ê®?ê•?ê¢?????ê≤ ?????ê¢ ???ê≤?? ?????ê°?ê®?ê®?ê• ????..????** ",
           " **???ê≤?? ???ê®?ê®?? ???ê®?ê´?êß?ê¢?êß????** ",
           " **???êÆ?êß?ê® ???ê§ ?????ê¶ ?????ê¢ ???êÆ?ê¶?ê¨????** ",
           " **???ê®?ê¢ ???ê®?êß?? ???ê•???ê≤ ???ê´?ê® ?????ò™** ",
           " **???ê¢???? ???ê® ???????ê≠ ???ê°??* ",
           " **?????ê•?ê•?ê®??** ",
           " **???ê≠?êÆ???ê≤ ???ê®?ê¶?ê•???ê≠?? ???êÆ?????ò∫** ",
           " **???ê®?ê•?ê® ???? ???êÆ???ê° ???ê´?ê´?•≤** ",
           " **???ê®?êß???ê•?ê¢ ???ê®?êß ?????ê¢...????** ",
           " **???êÆ?ê¶?ê°???ê´?ê¢ ???ê§ ???ê¢?? ???ê¢?ê•?????ê¢..???** ",
           " **???êÆ?ê¶?ê¶?ê≤ ???? ???ê≤?ê¢ ???ê≤????????** ",
           " **???ê´ ?????ê≠???ê® ???ê°?????ê°?ê¢ ?????ê¢?ê¨?ê¢ ?????ê¢??** ",
           " **?? ???ê®?êØ?? ???ê®?êÆ??????** ",
           " **???ê® ???ê®?êÆ ???ê®?êØ?? ????..???** ",
           " **?????ê§?ê°?ê¢ ?????? ?????êß?? ?????ê°?ê¢ ???ê®.????** ",
           " **???ê§ ???ê®?êß?? ???êÆ?êß???êÆ..??òπ** ",
           " **???êß?ê•?ê¢?êß?? ???? ???? ???? ???ê®?êß?? ???êÆ?êß?? ?????ê°?ê¢ ???êÆ?òª** ",
           " **???êß?ê¨?ê≠?????ê´???ê¶ ???ê°???ê•???ê≠?? ???ê®..????** ",
           " **???ê°???ê≠?ê¨???ê©?ê© ???êÆ?ê¶?????ê´ ???ê®???? ???ê©?êß?? ???êÆ?ê¶..???** ",
           " **???êÆ?ê¶?ê°?? ???ê®?êß ???? ???êÆ?ê¨?ê¢?? ???êÆ?êß?êß?? ?????ê¨???êß?? ?????ê¢..???** ",
           " **?????ê´?? ?????ê¶ ???ê°???ê≠???ê¶ ???ê® ???ê≤?? ?????ê©?ê§??..???** ",
           " **?????ê°?? ???? ???ê® ?????ê©??** ",
           " **???êÆ?êß?ê® ??????** ",
           " **?????ê´?? ???ê§ ???????ê¶ ?????ê´ ???ê®????..?** ",
           " **???ê≤ ?????ê≠?? ?????ê≠ ?????ê≠ ?????ê´?êß?? ?????ê£ ???? ????????** ",
           " **???ê®?ê¶ ?????? ?????ê¢?ê¨?? ?????ê¢?êß..???* ",
           " **???ê≤?? ???êÆ??..??ë±** ",
           " **???ê®?ê°?ê®?ê≠ ???????? ???? ???ê°?ê¢ ?????ê¢ ?§ß???** ",
           " **???ê°?êÆ?ê• ???ê≤?? ???êÆ?ê£?ê°??????** ",
           " **???êÆ?ê≠?ê° ???ê°?ê¢ ???ê®?ê•?êß?? ???ê°???ê°?ê¢?ê≤????** ",
           " **???ê°?? ???ê® ???ê°???ê∞ ?????ê≠ ???ê´?ê® ???????ê≠??** ",
           " **???ê≤?? ???êÆ???òÆ?òÆ** "
           " **???ê¢?ê¢??** ",
           " **?????ê©?ê§?? ?????ê¢?ê¨?? ???ê®?ê¨?ê≠ ???ê® ?????ê≠?ê° ???? ???ê¢?ê´ ???êÆ?ê¶ ???ê¢?ê¨ ?????ê≠ ???? ??** ",
           " **?????ê£ ?????ê¢ ?????? ???êÆ ?πÔ?** ",
           " **???êÆ?ê¨?ê£?ê°?ê¨?? ???ê°?ê¢ ?????ê≠ ?????ê´ ???ê® ???? ?•∫?•∫** ",
           " **???ê≤?? ?????ê´ ?????ê°?? ???ê®??** ",
           " **???ê≤?? ?????ê• ???ê°???ê• ?????ê¢ ??** ",
           " **?????ê°?? ???? ???ê® ?????ê©..???** ",
           " **???ê°???ê≠?ê≠?ê¢?êß?? ?????ê´ ???ê® ????..?•∫** ",
           " **???? ?????ê¨?ê®?ê®?ê¶ ???êÆ ?????•∫?•∫** ",
           " **?????ê• ?????ê£?? ???ê≤?? ???ê°?? ?????§≠??** ",
           " **???ê´?ê®?êÆ?ê© ???? ?????ê≠ ???ê≤?êÆ ?????ê°?ê¢ ?????ê´?ê≠?? ???ê®??** ",
           " **?????ê© ?????ê•???ê≠?ê¢?ê®?ê¶?ê¨?ê°?ê¢?ê© ???? ???ê®..???** ",
           " **???ê¢?ê≠?êß?? ???ê°?êÆ?ê© ?????ê°?ê≠?? ???ê® ???ê´?ê´?òº** ",
           " **?????ê©?ê§?ê® ?????êß?? ?????êß?? ?????ê≠?? ?????ê¢..??ò∏** ",
           " **???ê°?êÆ?ê¶?êß?? ???ê°???ê•?ê®????..????** ",
           " **???ê°?êÆ?ê¨ ?????ê°?? ?????ê´?ê® ?åÔ???** ",
           " **?????ê¶ ???ê®?ê¨?ê≠ ?????êß ?????ê§?ê≠?? ?????ê¢...??•∞** ",
           " **???êÆ???ê° ???ê®?ê• ???ê≤?êÆ ???ê°?ê¢ ?????ê°?? ???ê®..?•∫?•∫** ",
           " **???êÆ???ê° ?????ê¶?????ê´?ê¨ ?????? ?????ê´ ???ê® ?•≤** ",
           " **???ê¢?êß???ê•?? ???ê® ???? ???ê¢?êß???ê•?? ??** ",
           " **?????ê® ?????ê´?ê≠?ê≤ ?????ê´?ê≠?? ?????ê¢?êß???•≥** ",
           " **?????ê¶?ê•?ê®?ê®??** ",
           " **???êÆ?ê£?ê°?? ???ê°?êÆ?ê• ???ê≤?? ???ê≤???•∫** ",
           " **?????ê°?? ???? ?????ê®:- [ @TG_FRIENDSS ] ?????ê¨?ê≠?ê¢ ?????ê´???êß???? ?§≠?§≠** ",
           " **???ê´?êÆ?ê≠?ê° ???êß?? ?????ê´?? ???ê°???ê•?ê®????..? ??** ",
           " **?????ê£ ???êÆ?ê¶?ê¶?ê≤ ???? ?????ê≠?? ???ê´?•∫?•∫** ",
           " **???ê®?ê¢?êß ?????ê´ ???ê®:- [ @VIP_CREATORS ] ??** ",
           " **???ê§ ???ê¢?ê• ?????ê¢ ???ê§ ???ê¢?ê• ???ê¢ ???ê® ?????ê¢????** ",
           " **???êÆ?ê¶?ê°???ê´?? ???ê®?ê¨?ê≠ ?????ê°?? ???ê≤???•∫** ",
           " **???ê≤ ???êÆ?ê≠?? ???ê∞?êß???ê´ [ @Arank_Music ]?•∞** ",
           " **?????ê°?? ???ê°?ê®?ê≤?? ???ê® ???????êß??** ",
           " **???ê®?ê®?? ??8 ???ê¢ ???ê°?êÆ?ê≠ ?????ê≠ ???ê® ???ê≤?ê¢?•∞** ",
           ]

         

@client.on(events.NewMessage(pattern="^/tagall ?(.*)"))
@client.on(events.NewMessage(pattern="^@all ?(.*)"))
@client.on(events.NewMessage(pattern="^#all ?(.*)"))
@client.on(events.NewMessage(pattern="^#tag ?(.*)"))
@client.on(events.NewMessage(pattern="^/utag ?(.*)"))
@client.on(events.NewMessage(pattern="^@utag ?(.*)"))
@client.on(events.NewMessage(pattern="^#utag ?(.*)"))
async def mentionall(event):
    chat_id = event.chat_id
    if event.is_private:
        return await event.respond(
            "__This command can be use in groups and channels!__"
        )

    is_admin = False
    try:
        partici_ = await client(GetParticipantRequest(event.chat_id, event.sender_id))
    except UserNotParticipantError:
        is_admin = False
    else:
        if isinstance(
            partici_.participant, (ChannelParticipantAdmin, ChannelParticipantCreator)
        ):
            is_admin = True
    if not is_admin:
        return await event.respond("???êß?ê•?ê≤ ?????ê¶?ê¢?êß ?????êß ?????êß?ê≠?ê¢?ê®?êß ???ê® ???ê•?ê• ???????ê≤...")

    if event.pattern_match.group(1) and event.is_reply:
        return await event.respond("/tagall hello ?? ???ê≤?ê©?? ???ê¢?ê§?? ???ê°?ê¢?ê¨ ?????ê±?ê≠ ???ê¢?ê¶?? ???ê§ ???ê®?ê´ ?????????ê¢?êß??..")
    elif event.pattern_match.group(1):
        mode = "text_on_cmd"
        msg = event.pattern_match.group(1)
    elif event.is_reply:
        mode = "text_on_reply"
        msg = await event.get_reply_message()
        if msg == None:
            return await event.respond(
                "/tagall hii ?? ???ê≤?ê©?? ???ê¢?ê§?? ???ê°?ê¢?ê¨ ???ê´ ?????ê©?ê•?ê≤ ???êß?ê≤ ?????ê¨?ê¨??????..."
            )
    else:
        return await event.respond(
            "/tagall hii ?? ???ê≤?ê©?? ???ê¢?ê§?? ???ê°?ê¢?ê¨ ???ê´ ?????ê©?ê•?ê≤ ???êß?ê≤ ?????ê¨?ê¨??????..."

        )

    spam_chats.append(chat_id)
    usrnum = 0
    usrtxt = ""
    async for usr in client.iter_participants(chat_id):
        if not chat_id in spam_chats:
            break
        usrnum += 1
        usrtxt += f"[ {usr.first_name} ](tg://user?id={usr.id}) "
 
        if usrnum == 1:
            if mode == "text_on_cmd":
                txt = f"{usrtxt} {random.choice(TAGMES)}"
                await client.send_message(chat_id, txt)
      

            elif mode == "text_on_reply":
                await msg.reply(f"[ {random.choice(EMOJI)} ](tg://user?id={usr.id})")
            await asyncio.sleep(2)
            usrnum = 0
            usrtxt = ""
    try:
        spam_chats.remove(chat_id)
    except:
        pass


@client.on(events.NewMessage(pattern="^/cancel$"))
@client.on(events.NewMessage(pattern="^/stop$"))
async def cancel_spam(event):
    if not event.chat_id in spam_chats:
        return await event.respond("?????ê´?? ???ê® ???êß?ê≤ ?????êß?ê≠?ê¢?ê®?êß ???ê´?ê®?????ê¨?ê¨ ???ê¨ ???ê≠???ê´?ê≠???? ???ê≤ ????..")
    is_admin = False
    try:
        partici_ = await client(GetParticipantRequest(event.chat_id, event.sender_id))
    except UserNotParticipantError:
        is_admin = False
    else:
        if isinstance(
            partici_.participant, (ChannelParticipantAdmin, ChannelParticipantCreator)
        ):
            is_admin = True
    if not is_admin:
        return await event.respond("???ê°?ê¢?ê¨ ???ê®?ê¶?ê¶???êß?? ???ê¨ ???êß?ê•?ê≤ ???ê®?ê´ ?????ê¶?ê¢?êß?ê¨.. ???ê®?êÆ ?????êß'?ê≠ ???ê¨?? ???ê°?ê¢?ê¨ ???ê®?ê¶?ê¶???êß??..")

    else:
        try:
            spam_chats.remove(event.chat_id)
        except:
            pass
        return await event.respond("?¶?í?≠?®?©?©?û???????êß?ê≠?ê¢?ê®?êß ???????ê≤??)


__mod_name__ = "?°T·¥Ä…¢??
__help__ = """
?Ä?Ä?? ·¥è…¥ ü ??·¥è Ä ·¥Ä·¥Ö·?…™…¥s ?ç‚??Ä

??/·¥õ·?…¢·¥Ä?? , #tag , .tagmember , @·¥Ä?? , #all '(?·¥á·??? ·¥õ·? ·¥ç·?ss·¥Ä…¢·¥?·¥è Ä ·¥Ä·¥Ö·? ·¥Ä…¥·¥è·??·¥á Ä ·¥ç·?ss·¥Ä…¢·¥? ·¥õ·? ·¥ç·?…¥·¥õ…™·?…¥ ·¥Ä?? ·¥ç·?·¥ç ô·??s …™…¥ ?·¥è·?? …¢?·¥è·?·¥? ·¥°…™·??·¥è·?·¥?·¥áx·¥Ñ·?·¥ò·?…™·¥è…?'
??/cancel ?·¥è Ä ·¥Ñ·?…¥·¥Ñ·?? ·¥õ ú·? …¢·¥è…™…¥…?·¥õ·?…¢…¢…™…¥…¢
??...........?ô±?? ¬ª [???ô∏?ôø ?ô±?ôæ??](https://t.me/Arank_Music)............??"""
